<div class="requisition-template-search-criteria-layout full-height">

  <!--TODO: see if we need dirty state management (manage-form-state directive) for this form -->
  <form name="requisitionTemplateSearchForm" class="requisition-template-search-criteria-form full-height" spellcheck="false">

    <div class="panel panel-compact full-height">

      <!-- Requisition template search criteria top bar -->
      <div class="panel-heading panel-heading-no-padding panel-heading-no-border sgui-bgcolor-primary clearfix">

        <!-- Display label to the left -->
        <div class="pull-left panel-heading-padded-container sgui-color-primary-inverse">

          <span>{{ 'searchCriteria' | translate }}</span>

        </div>

      </div>
      <div class="panel-body panel-body-content panel-body-scroll-vertical-overflow panel-body-with-absolute-footer">

        <!-- display mode selector -->
        <div class="form-group">
          <label for="searchModeContainer">{{ 'display' | translate }}</label>
          <br />
          <div id="searchModeContainer" class="btn-group">
            <label
              class="btn btn-primary"
              title="{{ 'searchByRequisitionTemplateHeader' | translate }}"
              uib-btn-radio="$ctrl.model.searchModes.header"
              ng-model="$ctrl.model.searchMode"
              ng-click="$ctrl.onSearchModeChange($event)"
            >{{ 'header' | translate }}</label>
            <label
              class="btn btn-primary"
              title="{{ 'searchByProduct' | translate }}"
              uib-btn-radio="$ctrl.model.searchModes.product"
              ng-model="$ctrl.model.searchMode"
              ng-click="$ctrl.onSearchModeChange($event)"
            >{{ 'product' | translate }}</label>
          </div>
        </div>

        <!-- header search criteria toggler -->
        <div class="collapse-toggle" ng-init="templateCriteria = false">
          <a ng-href="#" onclick="return false;" ng-click="templateCriteria = !templateCriteria" title="{{ 'collapseExpandThisSection' | translate }}">
            <i class="fa fa-chevron-down" ng-show="!templateCriteria"></i>
            <i class="fa fa-chevron-right" ng-show="templateCriteria"></i>
          </a>
          <label>{{ 'templateIdentification' | translate }}</label>
        </div>

        <!-- header search criteria -->
        <div uib-collapse="templateCriteria" class="clearfix">

          <!-- template id -->
          <div class="form-group width-50">
            <label for="templateId" class="control-label">{{ 'templateNumber' | translate }}</label>
            <input type="text" class="form-control" id="templateId"
              ng-model="$ctrl.model.templateId"
              ng-change="$ctrl.onTemplateIdChange()"
            />
          </div>

          <!-- template name -->
          <div class="form-group">
            <label for="templateName" class="control-label">{{ 'templateDescription' | translate }}</label>
            <input type="text" class="form-control" id="templateName"
              ng-model="$ctrl.model.templateDescription"
              ng-change="$ctrl.onTemplateDescriptionChange()"
            />
          </div>

          <!-- site -->
          <div class="form-group">
            <label for="site" class="control-label">{{ 'site' | translate }}</label>
            <site-list
              input-id="'site'"
              ng-model="$ctrl.model.site"
              ng-change="$ctrl.onSelectSite()"
            >
            </site-list>
          </div>

          <!-- department -->
          <div class="form-group">
            <label for="administrativeUnit" class="control-label">{{ 'administrativeUnit' | translate }}</label>
            <department-list
              input-id="'administrativeUnit'"
              ng-model="$ctrl.model.department"
              ng-change="$ctrl.onSelectDepartment()"
              is-replenishment=false
              include-external-sales="$ctrl.isIncludeExternalSales()"
            >
            </department-list>
          </div>

          <!-- address -->
          <div class="form-group">
            <label for="address" class="control-label">{{ 'address' | translate }}</label>
            <address-list
              input-id="'address'"
              ng-model="$ctrl.model.address"
              ng-change="$ctrl.onSelectAddress()"
            >
            </address-list>
          </div>

          <!-- requester -->
          <div class="form-group">
            <label for="requester" class="control-label">{{ 'requester' | translate }}</label>
            <requester-list
              input-id="'requester'"
              ng-model="$ctrl.model.requester"
              ng-change="$ctrl.onSelectRequester()"
            >
            </requester-list>
          </div>

          <!-- client -->
          <div class="form-group" ng-hide="$ctrl.stateModel.client.hidden">
            <label for="client" class="control-label">{{ 'client' | translate }}</label>
            <client-list
              input-id="client"
              ng-model="$ctrl.model.client"
              ng-change="$ctrl.onSelectClient()">
            </client-list>
          </div>

          <!-- isActive -->
          <div class="form-group">
            <label for="isActiveContainer">{{ 'activationStatus' | translate }}</label>
            <br />
            <div id="isActiveContainer" class="btn-group">
              <label class="btn btn-primary" title="{{ 'active' | translate }}"
                uib-btn-radio="$ctrl.model.activeIndicators.active"
                ng-model="$ctrl.model.isActive"
                ng-click="$ctrl.onActiveChange($event)"
              >{{ 'active' | translate }}</label>
              <label class="btn btn-primary" title="{{ 'inactive' | translate }}"
                uib-btn-radio="$ctrl.model.activeIndicators.inactive"
                ng-model="$ctrl.model.isActive"
                ng-click="$ctrl.onActiveChange($event)"
              >{{ 'inactive' | translate }}</label>
              <label class="btn btn-primary" title="{{ 'all' | translate }}"
                uib-btn-radio="$ctrl.model.activeIndicators.all"
                ng-model="$ctrl.model.isActive"
                ng-click="$ctrl.onActiveChange($event)"
              >{{ 'all' | translate }}</label>
            </div>
          </div>

          <!-- isAutomaticGeneration -->
          <div class="form-group">
            <label for="isAutomaticGenerationContainer">{{ 'requisitionAutomaticGenerationStatus' | translate }}</label>
            <br />
            <div id="isAutomaticGenerationContainer" class="btn-group">
              <label class="btn btn-primary" title="{{ 'all' | translate }}"
                uib-btn-radio="$ctrl.model.automaticGenerationValues.all"
                ng-model="$ctrl.model.isAutomaticGeneration"
                ng-click="$ctrl.onAutomaticGenerationChange($event)"
              >{{ 'all' | translate }}</label>
              <label class="btn btn-primary" title="{{ 'yes' | translate }}"
                uib-btn-radio="$ctrl.model.automaticGenerationValues.yes"
                ng-model="$ctrl.model.isAutomaticGeneration"
                ng-click="$ctrl.onAutomaticGenerationChange($event)"
              >{{ 'yes' | translate }}</label>
              <label class="btn btn-primary" title="{{ 'no' | translate }}"
                uib-btn-radio="$ctrl.model.automaticGenerationValues.no"
                ng-model="$ctrl.model.isAutomaticGeneration"
                ng-click="$ctrl.onAutomaticGenerationChange($event)"
              >{{ 'no' | translate }}</label>
            </div>
          </div>
        </div>

        <!-- product search criteria toggler -->
        <div class="collapse-toggle" ng-init="productSection = false">
          <a ng-href="#" onclick="return false;" ng-click="productSection = !productSection" title="{{ 'collapseExpandThisSection' | translate }}"><i class="fa fa-chevron-down" ng-show="!productSection"></i><i class="fa fa-chevron-right" ng-show="productSection"></i></a>
          <label>{{ 'productIdentification' | translate }}</label>
        </div>
        <div uib-collapse="productSection">

          <!-- product number -->
          <div class="form-group width-50">
            <label for="productCode" class="control-label">{{ 'productNumber' | translate }}</label>
            <input type="text" class="form-control" id="productCode"
              ng-model="$ctrl.model.productCode"
              ng-change="$ctrl.onProductNumberChange()"
            />
          </div>

          <!-- product description -->
          <div class="form-group">
            <label for="productDescription" class="control-label">{{ 'productDescription' | translate }}</label>
            <input type="text" class="form-control" id="productDescription"
              ng-model="$ctrl.model.productDescription"
              ng-change="$ctrl.onProductDescriptionChange()"
            />
          </div>

          <!-- store -->
          <div class="form-group">
            <label for="store">{{ 'store' | translate }}</label>
            <store-list
              input-id="store"
              ng-model="$ctrl.model.productStore"
              ng-change="$ctrl.onProductStoreChange()">
            </store-list>
          </div>

          <!-- isProductInvalid -->
          <div class="form-group">
            <label for="isProductInvalidContainer">{{ 'invalidityOnTemplateProduct' | translate }}</label>
            <br />
            <div id="isProductInvalidContainer" class="btn-group">
              <label class="btn btn-primary" title="{{ 'all' | translate }}"
                uib-btn-radio="$ctrl.model.invalidProductValues.all"
                ng-model="$ctrl.model.isProductInvalid"
                ng-click="$ctrl.onProductInvalidChange($event)"
              >{{ 'all' | translate }}</label>
              <label class="btn btn-primary" title="{{ 'yes' | translate }}"
                uib-btn-radio="$ctrl.model.invalidProductValues.yes"
                ng-model="$ctrl.model.isProductInvalid"
                ng-click="$ctrl.onProductInvalidChange($event)"
              >{{ 'yes' | translate }}</label>
              <label class="btn btn-primary" title="{{ 'no' | translate }}"
                uib-btn-radio="$ctrl.model.invalidProductValues.no"
                ng-model="$ctrl.model.isProductInvalid"
                ng-click="$ctrl.onProductInvalidChange($event)"
              >{{ 'no' | translate }}</label>
            </div>
          </div>
        </div>
      </div>

      <!-- search criteria actions -->
      <div class="panel-footer panel-footer-no-border panel-footer-absolute-gradient-with-controls" auto-adjust-width=".panel-body">
        <div class="pull-right">

          <!-- clear search criteria action -->
          <button type="button"
                  class="btn btn-default"
                  title="{{ 'clear' | translate }}"
                  ng-click="$ctrl.onClear($event)"
                  ng-if="!$ctrl.stateModel.clear.hidden"
                  ng-disabled="$ctrl.isClearDisabled()">
            <i class="mdi mdi-filter-remove">
            </i>
            <span>{{ 'clear' | translate }}</span>
          </button>

          <!-- launch search action -->
          <button type="button"
                  class="btn btn-primary"
                  title="{{ 'search' | translate }}"
                  ng-click="$ctrl.onSearch($event)"
                  ng-if="!$ctrl.stateModel.search.hidden"
                  ng-disabled="$ctrl.isSearchDisabled()">
            <i ng-if="!($ctrl.stateModel.search.running || $ctrl.stateModel.search.completed)"
               class="mdi mdi-magnify"
               aria-hidden="true">
            </i>
            <span ng-class="{'fa fa-spinner fa-spin': $ctrl.stateModel.search.running, 'fa fa-check': $ctrl.stateModel.search.completed}"></span>
            <span>{{ 'search' | translate }}</span>
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
