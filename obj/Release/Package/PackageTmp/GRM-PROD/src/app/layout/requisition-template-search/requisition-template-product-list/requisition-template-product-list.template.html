<div class="full-height">

  <!-- results table -->
  <table id="requisition-template-search-product-table"
      class="table table-fixed-header-scrollable-content grm-data-table"
      st-table="$ctrl.model.products"
      st-pagination-helper="$ctrl.viewModel.paging"
      st-sorting-helper="$ctrl.viewModel.sorting"
      st-pipe="$ctrl.pipe"
      auto-adjust-header
    >
    <thead>
      <tr>
        <th class="width-7" st-sort="templateId" title="{{ 'sortOnThisColumn' | translate }}"><a ng-href="#" prevent-default>{{ 'numberAbbreviated' | translate }}</th>
        <th class="width-15" st-sort="templateDescription" title="{{ 'sortOnThisColumn' | translate }}"><a ng-href="#" prevent-default>{{ 'templateDescription' | translate }}</a></th>
        <th class="width-5 text-center">{{ 'active' | translate }}</th>
        <th class="width-10">{{ 'site' | translate }}</th>
        <th class="width-10" st-sort="department" title="{{ 'sortOnThisColumn' | translate }}"><a ng-href="#" prevent-default>{{ 'administrativeUnit' | translate }}</a></th>
        <th class="width-5 text-center">{{ 'invalidAbbreviated' | translate }}</th>
        <th class="width-7" st-sort="productCode" title="{{ 'sortOnThisColumn' | translate }}"><a ng-href="#" prevent-default>{{ 'productNumber' | translate }}</a></th>
        <th class="width-20" st-sort="productDescription" title="{{ 'sortOnThisColumn' | translate }}"><a ng-href="#" prevent-default>{{ 'productDescription' | translate }}</a></th>
        <th class="width-10">{{ 'format' | translate }}</th>
        <th class="width-10">{{ 'store' | translate }}</th>
      </tr>
    </thead>
    <tbody class="scrollable full-height">
      <tr class="selectable" ng-repeat="item in $ctrl.model.products" ng-click="$ctrl.onRowSelect($event, $index)" ng-class="{ 'selected': item.selected }" ng-attr-id="{{ 'itemLine_' + $index }}">
        <td class="width-7">
            <a title="{{ 'drillDownRequisitionTemplateX' | translate:item.templateId }}" ui-sref=".requisition-template.update({ id: {{ item.templateId }}, iid: {{ item.templateItemId }} })">{{ ::item.templateId }}</a>
        </td>
        <td class="width-15">{{ ::item.templateDescription }}</td>
        <td class="width-5 text-center"><span ng-if="item.isActive" class="mdi mdi-check"></span></td>
        <td class="width-10">{{ ::item.site.description }}</td>
        <td class="width-10">{{ ::item.department.description }}</td>
        <td class="width-5 text-center">
          <span class="alert-indicator"
            ng-show="true === item.isProductInvalid"
            tooltip-placement="right"
            tooltip-append-to-body="true"
            uib-tooltip="{{ item.productInvalidityReason }}"></span>
        </td>
        <td class="width-7">{{ ::item.productCode }}</td>
        <td class="width-20">{{ ::item.productDescription }}</td>
        <td class="width-10">{{ item.distributionUnit ? item.distributionUnit.description : '' }}</td>
        <td class="width-10">{{ item.store ? item.store.code + ' - ' + item.store.description : '' }}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="text-center" st-pagination st-items-by-page="$ctrl.viewModel.paging.size" colspan="10"></td>
      </tr>
    </tfoot>
  </table>
</div>
