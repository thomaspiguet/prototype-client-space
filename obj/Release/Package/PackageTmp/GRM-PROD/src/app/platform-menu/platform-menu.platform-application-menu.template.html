<nav>
    <div id="application-menu" class="application-menu" ng-hide="!vm.isMenuOpen" ng-class="vm.animType">
        <div class="app-menu-content">
            <div class="application-menu-header-container">
                <a class="application-menu-header" role="button">
                    <nav-bar-brand anim-type="{{::vm.animType}}"></nav-bar-brand>
                </a>
            </div>
            <!--Domains-->
            <div class="application-menu-domain-container" ng-show="vm.menuContentVisible">
                <ul class="list-unstyled">
                    <li ng-repeat="domain in vm.menuConfig.domains track by $index">
                        <div class="application-menu-domain" ng-click="vm.collapseMenu($index)">
                            <!-- active indicator bar -->
                            <span class="application-menu-domain-indicator" ng-class="{ 'active' : domain.isActive }"></span>
                            <a ng-href="{{domain.isActive ? '' : domain.url}}" ng-class="{ 'active' : domain.isActive }" ng-attr-target="{{(domain.target) ? domain.target : undefined}}">
                                <span class="domain-icon {{domain.iconClass}}"></span>
                                <div class="pla-tooltip">
                                    <span class="domain-name">{{ 'platform.' + domain.name + '_DISPLAY_NAME' | translate}}</span>
                                    <span class="pla-tooltiptext">{{ 'platform.' +  domain.name + '_TOOLTIP_KEY' | translate}}</span>
                                </div>
                                <span ng-show="domain.appInstances.length !== 0" class="domain-submenu-indicator" ng-class="vm.collapseId == $index ? 'glyphicon glyphicon-menu-up' : 'glyphicon glyphicon-menu-down'"></span>
                            </a>
                        </div>

                        <div class="application-menu-instance" ng-show="vm.collapseId == $index">
                            <div ng-show="domain.appInstances.length !== 0">
                                <ul class="list-unstyled application-menu-instance-list">
                                    <li class="instance-app" ng-repeat="app in domain.appInstances">
                                        <a ng-href="{{app.isActive ? '' : app.url}}" ng-attr-target="{{(app.target) ? app.target : undefined}}" ng-class="{ 'active' : app.isActive }">
                                            <div class="pla-tooltip">
                                                <span class="domain-instance-name" >{{'platform.' + app.name + '_DISPLAY_NAME' | translate}}{{ app.env != null && app.env.length != 0 ? (' (' + app.env + ')') : null }}</span>
                                                <span class="pla-tooltiptext">{{'platform.' + app.name + '_TOOLTIP_KEY' | translate}}</span>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>
